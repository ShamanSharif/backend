{% load static %}

<!DOCTYPE html>
<html lang="en" class="h-100">




      <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cart | CELLNSTYLE</title>
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
        <!-- EXTERNAL CSS LINK -->
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link rel="stylesheet" href="https://unpkg.com/bs-brain@2.0.4/components/navbars/navbar-1/assets/css/navbar-1.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        <link
        rel="stylesheet"
        data-purpose="Layout StyleSheet"
        title="Web Awesome"
        href="/css/app-wa-09b459cf485d4b1f3304947240314c05.css?vsn=d"
      />
      <link
        rel="stylesheet"
        href="https://site-assets.fontawesome.com/releases/v6.6.0/css/all.css"
      />
      <link
        rel="stylesheet"
        href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-duotone-solid.css"
      />
      <link
        rel="stylesheet"
        href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-thin.css"
      />
      <link
        rel="stylesheet"
        href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-solid.css"
      />
      <link
        rel="stylesheet"
        href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-regular.css"
      />
      <link
        rel="stylesheet"
        href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-light.css"
      />
        <!-- Font -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet">
        <!-- Carousel Templete -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
            integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css"
            integrity="sha512-OTcub78R3msOCtY3Tc6FzeDJ8N9qvQn1Ph49ou13xgA9VsH9+LRxoFU6EqLhW4+PKRfU+/HReXmSZXHEkpYoOA=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
    </head>

<body class="d-flex flex-column h-100 ">


    <!-- <div class="preloader" id="preloader-active">
        <div id="loader"></div>
    </div> -->


    <header class="headerSection fixed-top" style="background: #231f20;">



<!-- Dynamic Navbar -->
<nav class="navbar navbar-expand-lg bsb-navbar bsb-navbar-hover bsb-navbar-caret">
    <div class="container">
        <!-- Dynamic Logo -->
        <a class="navbar-brand" href="{% url 'index' %}">
            <img src="{{ logo.image.url }}" alt="{{ logo.alt_text }}" style="width: clamp(8.3125rem, 8.008928571428571rem + 1.5178571428571428vw, 9.375rem);" />
        </a>

        <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#ffffff" class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
            </svg>
        </button>

        <div class="offcanvas offcanvas-end" style="background: #231f20;" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title text-white" id="offcanvasNavbarLabel">Menu</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>

            <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-center flex-grow-1 gap-xl-4">
                    <!-- Dynamic Navbar Items -->
                    {% for item in navbar_items %}
                        {% if item.is_dropdown %}
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown{{ forloop.counter }}" role="button" data-bs-toggle="dropdown" aria-expanded="false">{{ item.title }}</a>
                                <ul class="dropdown-menu border-0 shadow-sm megamenu" aria-labelledby="navbarDropdown{{ forloop.counter }}">
                                    {% for dropdown_item in item.dropdown_items.all %}
                                        <li><a class="dropdown-item" href="{{ dropdown_item.link }}">{{ dropdown_item.title }}</a></li>
                                    {% endfor %}
                                </ul>
                            </li>
                        {% else %}
                            <li class="nav-item">
                                <a class="nav-link text-nowrap" href="{{ item.link }}">{{ item.title }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    <!-- Dynamic Repair Service Section -->
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="repairDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Repair Service</a>
    <ul class="dropdown-menu border-0 shadow-sm megamenu" aria-labelledby="repairDropdown" style="width: 100%;">
        <div class="row">
            <div class="col-12">
                <div class="repair-service-description">
                    <img class="nav-repair-icon" src="{% static 'images/repair-tools-svgrepo-com.svg' %}" alt="Repair Tools">
                    <h5>What can we fix for you?</h5>
                    <p class="pt-3">Select the device that needs fixing, and let our certified technicians handle the rest.</p>
                </div>
            </div>
            <!-- Scrollable Repair Service Items -->
            <div class="col-12 repair-service-items" style="max-height: 400px; overflow-y: auto;">
                {% for service in repair_services %}
                    <a class="dropdown-item text-center" href="{{ service.link }}">
                        <div class="pt-3 border rounded-2 text-dark nav-c-card">
                            <img class="dropdown-categories-img" src="{{ service.image.url }}" alt="{{ service.title }}">
                            <p class="nav-c-text">{{ service.title }}</p>
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
    </ul>
</li>


                    
                    
                </ul>

                <!-- Call Now Button -->
                <li class="nav-item book-li ms-auto">
                    <a class="nav-link text-nowrap text-center book-repair-btn" href="#footer">CALL NOW</a>
                </li>
            </div>
        </div>
    </div>
</nav>


    </header>


    <main class="flex-shrink-0">


        <!-- Main Content Start -->

        <!-- Terms And Conditions section start-->


        <section class="extremeContainer2 container" style="padding-block: 6rem 3rem;">
            <h1 class="section-title">My Cart</h1>
        
            <div class="d-flex flex-column gap-5 mt-5">
                <div class="allCartItems d-flex flex-column gap-3">
                    {% for item in accessories_in_cart %}
                        <div class="cartItem d-flex flex-column gap-2" data-id="{{ item.id }}">
                            <div class="d-flex gap-3 align-items-center p-2 rounded-2" style="background: var(--secondaryColor);">
                                <img src="{{ item.image.url }}" alt="{{ item.name }}" class="rounded-2" style="width: 80px;">
                                <div class="d-flex flex-column">
                                    <p class="mb-0">{{ item.name }}</p>
                                    <div class="d-flex gap-2 align-items-center">
                                        <b>Price:</b>
                                        <div class="d-flex" style="color: var(--primaryColor);">
                                            <h6 class="singleProductPrice mb-0">{{ item.price }}</h6>
                                            <h6 class="mb-0">$</h6>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2 align-items-center">
                                        <b>Total Price:</b>
                                        <div class="d-flex" style="color: var(--primaryColor);">
                                            <h6 class="totalPrice mb-0">{{ item.price }}</h6>
                                            <h6 class="mb-0">$</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
        
                            <div class="d-flex gap-3 justify-content-between align-items-center p-2">
                                <div class="d-flex gap-4 align-items-center">
                                    <button class="QuantityDecrementBtn" data-id="{{ item.id }}">-</button>
                                    <h6 class="productQuantity" style="color: var(--primaryColor);">1</h6>
                                    <button class="QuantityIncrementBtn" data-id="{{ item.id }}">+</button>
                                </div>
                <!-- Font Awesome icon for delete -->
<i class="cartItemDeleteBtn fa fa-trash" data-id="{{ item.id }}" style="cursor: pointer;"></i>

                            </div>
                        </div>
                    {% endfor %}
                </div>
        
                <div class="d-flex flex-column gap-2">
                    <h6 class="p-3" style="background: var(--secondaryColor);">Order Summary</h6>
                    <div class="d-flex gap-3 justify-content-between">
                        <span>Subtotal</span> <span class="subtotal" style="color: var(--primaryColor);">{{ subtotal }}$</span>
                    </div>
                    <div class="d-flex gap-3 justify-content-between">
                        <span>Delivery Charge</span> <span class="deliveryCharge" style="color: var(--primaryColor);">45$</span>
                    </div>
                    <div class="d-flex gap-3 justify-content-between">
                        <b>Total</b> <b class="totalBill" style="color: var(--primaryColor);">{{ subtotal|add:45 }}$</b>
                    </div>



                 
                    
                        <!-- Form section -->
                        <form action="{% url 'confirm_order' %}" method="post" class="d-flex flex-column gap-3">
                            {% csrf_token %}
                            <div class="form-floating w-100">
                                <input type="text" name="customerFirstName" class="form-control" id="customerFirstName" required>
                                <label for="customerFirstName">Your First Name</label>
                            </div>
                            <div class="form-floating w-100">
                                <input type="text" name="customerLastName" class="form-control" id="customerLastName" required>
                                <label for="customerLastName">Your Last Name</label>
                            </div>
                            <div class="form-floating">
                                <input type="email" name="customerEmail" class="form-control" id="customerEmail" required>
                                <label for="customerEmail">Your Email address</label>
                            </div>
                            <div class="form-floating">
                                <input type="number" name="customerPhone" class="form-control" id="customerPhone" required>
                                <label for="customerPhone">Your Phone number</label>
                            </div>
                            <div class="form-floating">
                                <input type="text" name="customerAddress" class="form-control" id="customerAddress" required>
                                <label for="customerAddress">Your Address</label>
                            </div>
                            
                            <button type="submit" class="carousel-inner-btn py-2 rounded-2 submitButton">Confirm Buy</button>
                        </form>
                    </section>
                    
                </div>
            </div>
        </section>
        


        
        <!-- Terms And Conditions section end-->        

        <!-- Main Content End -->



        <!-- Floating Social Media Start -->

        <section>
            <div class="floating-social-media">
                <p><a class="floating-icon" href=""><i class="icon-1 fa-brands fa-whatsapp"></i></a></p>

                <p><a class="floating-icon" href=""><i style="padding-left: 2px;"
                            class="icon-2 fa-brands fa-facebook-f"></i></a></p>
                <p><a class="floating-icon" href=""><i class="icon-3 fa-brands fa-instagram"></i></a></p>
                <p><a class="floating-icon" href=""><i class="icon-4 fa-brands fa-youtube"></i></a></p>
            </div>
        </section>

        <!-- Floating Social Media End -->

    </main>





    <!-----Footer Start------------->

    <footer id="footer" class="footer text-white" style="background: rgb(35, 31, 32);">
        <div class="container py-5">
            <div class="row row-cols-1 row-cols-lg-2 gap-5 gap-lg-0">

                    <div class="position-relative overflow-hidden">
                        <img src="./asset/images/usa.svg" alt="" class="w-100 h-100 position-absolute" style="z-index: 2; opacity: .15; transform: scale(1.3);">
                        <div class="d-flex position-relative flex-column gap-3" style="z-index: 10;">
                            <!-- <h4 class="m-0" style="font-weight: 600;">CELL<i style="color: var(--primaryColor); font-weight: 700;">N</i>STYLE</h4> -->
                             <h4 style="font-weight: 600;">Our Stores</h4>
                            <p class="footerSubtext">Visit one of our locations for quick and reliable repair services. We're here to help with all your device needs!</p>

                            <!-- <a href="mailto:cellnstyle888@gmail.com" target="_blank" class="d-flex gap-2 align-items-center">
                                <i class="fa-duotone fa-solid fa-envelope" style="color: var(--primaryColor);"></i>
                                <span>cellnstyle888@gmail.com</span>
                            </a> -->

                            <div class="d-flex position-relative flex-column gap-5">
                                <div class="d-flex flex-column gap-2 ">
                                    <h5>Store In Denton Area </h5>
                                    <a href="http://maps.apple.com/?q=Cell+n+Style,+2201+S+Interstate+35,+Denton,+TX+76205,+United+States" target="_blank" class="d-flex gap-2 align-items-center">
                                        <i class="fa-duotone fa-solid fa-map-location-dot" style="color: var(--primaryColor);"></i>
                                        <span>2201 S Interstate 35, Denton, TX 76205</span>
                                    </a>
                                    <a href="tel:+19403809094" class="d-flex gap-2 align-items-center">
                                        <i class="fa-duotone fa-solid fa-phone-arrow-up-right" style="color: var(--primaryColor);"></i>
                                        <span>940-380-9094</span>
                                    </a>
                                </div>
                                <div class="d-flex flex-column gap-2">
                                    <h5>Store In Aubrey & Little Elm Area</h5>
                                    <a href="http://maps.apple.com/?q=Cell+n+Style+Cell+Phone+%26+Computer+Repair+at+Aubrey,+26615+US-380+%23140,+Aubrey,+TX+76227,+United+States" target="_blank" class="d-flex gap-2 align-items-center">
                                        <i class="fa-duotone fa-solid fa-map-location-dot" style="color: var(--primaryColor);"></i>
                                        <span>26615 US-380 #140, Aubrey, TX 76227</span>
                                    </a>
                                    <a href="tel:+19729779115" class="d-flex gap-2 align-items-center">
                                        <i class="fa-duotone fa-solid fa-phone-arrow-up-right" style="color: var(--primaryColor);"></i>
                                        <span>972-977-9115</span>
                                    </a>
                                </div>
                            </div>
        

                        </div>
                    </div>

                    <div class="position-relative">
                        <div class="row row-cols-1 row-cols-md-2 gap-4 gap-sm-0 justify-content-between">

                            <div class="d-flex flex-column gap-3" style="width: fit-content;">
                                <h4 style="font-weight: 600;">Repair Services</h4>
                                <div class="d-flex flex-column gap-3">
                                    <a href="{% url 'repair_page' %}">Phone</a>
                                    <a href="{% url 'repair_page' %}">Tab</a>
                                    <a href="{% url 'repair_page' %}">Computer</a>
                                    <a href="{% url 'repair_page' %}">Console</a>
                                    <a href="{% url 'repair_page' %}">Headset</a>
                                    <a href="{% url 'repair_page' %}">Something else</a>
            
                                </div>
                            </div>
    
                            <div class="d-flex flex-column gap-3" style="width: fit-content;">
                                <h4 style="font-weight: 600;">Important Links</h4>
                                <div class="d-flex flex-column gap-3">
                                    <a href="{% url 'terms_conditions' %}">Terms & Conditions</a>
                                    <a href="{% url 'privacy_policy' %}">Privacy Policy</a>
                                    
                                    <a href="">About</a>
                                    <a href="{% url 'repair_page' %}">Repair Service</a>
                                    <a href="">Accessories</a>
                                    <a href="{% url 'sell_device' %}">Sell</a>
                                </div>
                            </div>
    
                        </div>
                    </div>
    

            </div>

        </div>

        <div class="container">
            <div class="copyrights text-center border-top pt-3" style="border-color: var(--accentColor) !important;">
              @ <span id="autodate"></span> - CALLNSTYLE.
            </div>
            <div class="text-end">
              <p>
                Develop By - <br />
                <a target="_blank" href="https://www.ositsltd.com/">
                  <img
                    style="width: 30px; margin-right: 5px"
                    src="https://www.ositsltd.com/media/logo/logo_K6FFJzc.png"
                    alt=""
                  />
                  OS IT Solutions Ltd.</a
                >
              </p>
            </div>
          </div>
    </footer>

    <!-------Footer End------------->




    <!-- JS EXTERNAL & INTERNAL LINK -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- Local JS files using Django static tag -->
<script src="{% static 'js/main.js' %}" defer></script>
<script src="{% static 'js/index.js' %}" defer></script>
<script src="{% static 'js/repair.js' %}" defer></script>
<script src="{% static 'js/products.js' %}" defer></script>
<script src="{% static 'js/searchFilter.js' %}" defer></script>
<script src="{% static 'js/productDetails.js' %}" defer></script>
<script src="{% static 'js/cart.js' %}" defer></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script>
    // Place the JavaScript code here



    document.addEventListener('DOMContentLoaded', function() {
        const cartItems = document.querySelectorAll('.cartItem');
        
        cartItems.forEach(item => {
            const decrementBtn = item.querySelector('.QuantityDecrementBtn');
            const incrementBtn = item.querySelector('.QuantityIncrementBtn');
            const deleteBtn = item.querySelector('.cartItemDeleteBtn');
            const quantityDisplay = item.querySelector('.productQuantity');
            const totalDisplay = item.querySelector('.totalPrice');
            const singlePrice = parseFloat(item.querySelector('.singleProductPrice').innerText);
            
            decrementBtn.addEventListener('click', () => updateQuantity(item, quantityDisplay, -1, singlePrice, totalDisplay));
            incrementBtn.addEventListener('click', () => updateQuantity(item, quantityDisplay, 1, singlePrice, totalDisplay));
            deleteBtn.addEventListener('click', () => removeItem(item));
        });
    
        function updateQuantity(item, quantityDisplay, delta, price, totalDisplay) {
            let quantity = parseInt(quantityDisplay.innerText) + delta;
            quantity = Math.max(1, quantity);  // Ensure quantity is at least 1
            quantityDisplay.innerText = quantity;
            totalDisplay.innerText = (quantity * price).toFixed(2);
    
            // Recalculate totals
            recalculateTotal();
        }
        function removeItem(item) {
            const itemId = item.dataset.id;
            
            fetch(`/cart/remove/${itemId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',  // Ensure CSRF token is included
                    'Content-Type': 'application/json',
                },
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    item.remove();
                    recalculateTotal();
                }
            });
        }
        
        function recalculateTotal() {
            let subtotal = 0;
            document.querySelectorAll('.totalPrice').forEach(price => {
                subtotal += parseFloat(price.innerText);
            });
            const deliveryCharge = parseFloat(document.querySelector('.deliveryCharge').innerText);
            document.querySelector('.subtotal').innerText = subtotal.toFixed(2) + "$";
            document.querySelector('.totalBill').innerText = (subtotal + deliveryCharge).toFixed(2) + "$";
        }
    });
    
</script>
{% if messages %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            {% for message in messages %}
                alert("{{ message }}");
            {% endfor %}
            window.location.reload();
        });
    </script>
    {% endif %}

</body>

</html>